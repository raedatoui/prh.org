.module {
  padding: $module-padding-xs * 2 $module-padding-xs;

  img {
    flex-basis: auto;
    height: auto;
    max-width: 100%;
  }

  @include responsive-mq(lg) {
    padding: $module-padding-lg $module-padding-xs;
  }
}

%module-title {
  background-position: bottom right;
  background-repeat: repeat-x;
  display: inline-block;
  margin: 30px auto 50px;
  text-transform: uppercase;

  h2 {
    @extend %eyebrow;
  }
}

.module__title {
  @extend %module-title;

  background-image: url("../images/optimized/asset_detail_wave_dk.png");
  color: $base-font-blue;

  h2 {
    margin-bottom: 15px;
    padding: 0 2em;
  }

  .hero & {
    background-image: url("../images/optimized/asset_detail_wave.png");
    color: #fff;
  }
}


// Curves in the bg! Currently scoped to certain templates to avoid any weird interactions,
// but it'll be more global eventually.
.hero ~ .module {

  .page-template & {
    padding-bottom: 11vw;
    position: relative;

    &::before {
      background: url("../images/optimized/beige-curve--wave.svg") repeat-x;
      background-position: bottom center;
      background-size: 105vw auto; // slightly over-wide to avoid gaps at the edges
      content: "";
      display: block;
      height: 10vw;
      left: 0;
      margin-top: 2px; // safer than using calc() to set the top offset
      padding: 0;
      position: absolute;
      right: 0;
      top: -10vw;
    }
  }



  .page-template-issue & {
    &:nth-child(even) {
      background-color: $prh-pink-lt;

      &::before {
        background-image: url("../images/optimized/pink-curve--arc.svg");
      }
    }

    &.donate-module:nth-child(odd) {
      &::before {
        background-image: url("../images/optimized/pink-arc--concave.svg") !important;
      }
    }

    &.donate-module:nth-child(even) {
      &::before {
        background-image: url("../images/optimized/cream-arc--concave.svg") !important;
      }
    }
  }


  .home & {
    &:nth-child(odd) {
      background-color: $prh-pink-lt;

      &::before {
        background-image: url("../images/optimized/pink-curve--arc.svg");
      }
    }

    &.donate-module:nth-child(even) {
      &::before {
        background-image: url("../images/optimized/pink-arc--concave.svg") !important;
      }
    }

    &.donate-module:nth-child(odd) {
      &::before {
        background-image: url("../images/optimized/cream-arc--concave.svg") !important;
      }
    }
  }

  &.footer-module:before {
    background-image: url("../images/optimized/navy-curve--wave.svg") !important;
  }

  &.donate-module::before {
    top: -5px; // avoids hairlines
    background-position: center top;
  }
}
